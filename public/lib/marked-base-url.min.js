/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/marked-base-url@1.1.2/lib/index.umd.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
// !function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).markedBaseUrl={})}(this,(function(e){"use strict";e.baseUrl=function(e){e=e.trim().replace(/\/+$/,"/");const t=/^[\w+]+:\/\//,r=t.test(e),f="http://__dummy__",n=new URL(e,f),s=16+(e.startsWith("/")?0:1);return{walkTokens(f){if(["link","image"].includes(f.type)&&!t.test(f.href)&&!f.href.startsWith("#"))if(r)try{f.href=new URL(f.href,e).href}catch(e){}else{if(f.href.startsWith("/"))return;try{const e=new URL(f.href,n).href;f.href=e.slice(s)}catch(e){}}}}}}));
//# sourceMappingURL=/sm/abd340fa7339235d256373999dfddfb2a9f6e1ec13ea5c5906dc89f2493c7410.map

export const baseUrl = (e) => {
  e = e.trim().replace(/\/+$/, '/');
  const t = /^[\w+]+:\/\//,
    r = t.test(e),
    f = 'http://__dummy__',
    n = new URL(e, f),
    s = 16 + (e.startsWith('/') ? 0 : 1);
  return {
    walkTokens(f) {
      if (
        ['link', 'image'].includes(f.type) &&
        !t.test(f.href) &&
        !f.href.startsWith('#')
      )
        if (r)
          try {
            f.href = new URL(f.href, e).href;
          } catch (e) {}
        else {
          if (f.href.startsWith('/')) return;
          try {
            const e = new URL(f.href, n).href;
            f.href = e.slice(s);
          } catch (e) {}
        }
    },
  };
};
